{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport * as React from 'react';\nimport { forwardRef, useMemo, useEffect } from 'react';\nimport { ArcballControls as ArcballControls$1 } from 'three-stdlib';\nconst ArcballControls = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    camera,\n    makeDefault,\n    regress,\n    domElement,\n    onChange,\n    onStart,\n    onEnd,\n    ...restProps\n  } = _ref;\n  const invalidate = useThree(_ref2 => {\n    let {\n      invalidate\n    } = _ref2;\n    return invalidate;\n  });\n  const defaultCamera = useThree(_ref3 => {\n    let {\n      camera\n    } = _ref3;\n    return camera;\n  });\n  const gl = useThree(_ref4 => {\n    let {\n      gl\n    } = _ref4;\n    return gl;\n  });\n  const events = useThree(_ref5 => {\n    let {\n      events\n    } = _ref5;\n    return events;\n  });\n  const set = useThree(_ref6 => {\n    let {\n      set\n    } = _ref6;\n    return set;\n  });\n  const get = useThree(_ref7 => {\n    let {\n      get\n    } = _ref7;\n    return get;\n  });\n  const performance = useThree(_ref8 => {\n    let {\n      performance\n    } = _ref8;\n    return performance;\n  });\n  const explCamera = camera || defaultCamera;\n  const explDomElement = domElement || (typeof events.connected !== 'boolean' ? events.connected : gl.domElement);\n  const controls = useMemo(() => new ArcballControls$1(explCamera), [explCamera]);\n  useFrame(() => {\n    if (controls.enabled) controls.update();\n  });\n  useEffect(() => {\n    const callback = e => {\n      invalidate();\n      if (regress) performance.regress();\n      if (onChange) onChange(e);\n    };\n\n    controls.connect(explDomElement);\n    controls.addEventListener('change', callback);\n    if (onStart) controls.addEventListener('start', onStart);\n    if (onEnd) controls.addEventListener('end', onEnd);\n    return () => {\n      controls.removeEventListener('change', callback);\n      if (onStart) controls.removeEventListener('start', onStart);\n      if (onEnd) controls.removeEventListener('end', onEnd);\n      controls.dispose();\n    };\n  }, [explDomElement, onChange, onStart, onEnd, regress, controls, invalidate]);\n  useEffect(() => {\n    if (makeDefault) {\n      // @ts-expect-error new in @react-three/fiber@7.0.5\n      const old = get().controls; // @ts-expect-error new in @react-three/fiber@7.0.5\n\n      set({\n        controls\n      }); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n      return () => set({\n        controls: old\n      });\n    }\n  }, [makeDefault, controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: ref,\n    object: controls\n  }, restProps));\n});\nexport { ArcballControls };","map":null,"metadata":{},"sourceType":"module"}