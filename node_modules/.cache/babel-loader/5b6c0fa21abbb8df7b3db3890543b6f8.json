{"ast":null,"code":"import { Earcut } from './Earcut.js';\n\nclass ShapeUtils {\n  // calculate area of the contour polygon\n  static area(contour) {\n    const n = contour.length;\n    let a = 0.0;\n\n    for (let p = n - 1, q = 0; q < n; p = q++) {\n      a += contour[p].x * contour[q].y - contour[q].x * contour[p].y;\n    }\n\n    return a * 0.5;\n  }\n\n  static isClockWise(pts) {\n    return ShapeUtils.area(pts) < 0;\n  }\n\n  static triangulateShape(contour, holes) {\n    const vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\n    const holeIndices = []; // array of hole indices\n\n    const faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n    removeDupEndPts(contour);\n    addContour(vertices, contour); //\n\n    let holeIndex = contour.length;\n    holes.forEach(removeDupEndPts);\n\n    for (let i = 0; i < holes.length; i++) {\n      holeIndices.push(holeIndex);\n      holeIndex += holes[i].length;\n      addContour(vertices, holes[i]);\n    } //\n\n\n    const triangles = Earcut.triangulate(vertices, holeIndices); //\n\n    for (let i = 0; i < triangles.length; i += 3) {\n      faces.push(triangles.slice(i, i + 3));\n    }\n\n    return faces;\n  }\n\n}\n\nfunction removeDupEndPts(points) {\n  const l = points.length;\n\n  if (l > 2 && points[l - 1].equals(points[0])) {\n    points.pop();\n  }\n}\n\nfunction addContour(vertices, contour) {\n  for (let i = 0; i < contour.length; i++) {\n    vertices.push(contour[i].x);\n    vertices.push(contour[i].y);\n  }\n}\n\nexport { ShapeUtils };","map":null,"metadata":{},"sourceType":"module"}