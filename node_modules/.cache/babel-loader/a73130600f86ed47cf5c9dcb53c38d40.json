{"ast":null,"code":"import _classCallCheck from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nvar Object3DNode = /*#__PURE__*/function (_Node) {\n  _inherits(Object3DNode, _Node);\n\n  var _super = _createSuper(Object3DNode);\n\n  function Object3DNode() {\n    var _this;\n\n    var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object3DNode.VIEW_MATRIX;\n    var object3d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, Object3DNode);\n\n    _this = _super.call(this);\n    _this.scope = scope;\n    _this.object3d = object3d;\n    _this.updateType = NodeUpdateType.Object;\n    _this._uniformNode = new UniformNode(null);\n    return _this;\n  }\n\n  _createClass(Object3DNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType() {\n      var scope = this.scope;\n\n      if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n        return 'mat4';\n      } else if (scope === Object3DNode.NORMAL_MATRIX) {\n        return 'mat3';\n      } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n        return 'vec3';\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(frame) {\n      var object = this.object3d !== null ? this.object3d : frame.object;\n      var uniformNode = this._uniformNode;\n      var camera = frame.camera;\n      var scope = this.scope;\n\n      if (scope === Object3DNode.VIEW_MATRIX) {\n        uniformNode.value = object.modelViewMatrix;\n      } else if (scope === Object3DNode.NORMAL_MATRIX) {\n        uniformNode.value = object.normalMatrix;\n      } else if (scope === Object3DNode.WORLD_MATRIX) {\n        uniformNode.value = object.matrixWorld;\n      } else if (scope === Object3DNode.POSITION) {\n        uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      } else if (scope === Object3DNode.VIEW_POSITION) {\n        uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n        uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n      }\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var scope = this.scope;\n\n      if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n        this._uniformNode.nodeType = 'mat4';\n      } else if (scope === Object3DNode.NORMAL_MATRIX) {\n        this._uniformNode.nodeType = 'mat3';\n      } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n        this._uniformNode.nodeType = 'vec3';\n        this._uniformNode.value = new Vector3();\n      }\n\n      return this._uniformNode.build(builder);\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(data) {\n      _get(_getPrototypeOf(Object3DNode.prototype), \"serialize\", this).call(this, data);\n\n      data.scope = this.scope;\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      _get(_getPrototypeOf(Object3DNode.prototype), \"deserialize\", this).call(this, data);\n\n      this.scope = data.scope;\n    }\n  }]);\n\n  return Object3DNode;\n}(Node);\n\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\n\nexport default Object3DNode;","map":null,"metadata":{},"sourceType":"module"}