{"ast":null,"code":"import _classCallCheck from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nvar ImageBitmapLoader = /*#__PURE__*/function (_Loader) {\n  _inherits(ImageBitmapLoader, _Loader);\n\n  var _super = _createSuper(ImageBitmapLoader);\n\n  function ImageBitmapLoader(manager) {\n    var _this;\n\n    _classCallCheck(this, ImageBitmapLoader);\n\n    _this = _super.call(this, manager);\n\n    if (typeof createImageBitmap === 'undefined') {\n      console.warn('THREE.ImageBitmapLoader: createImageBitmap() not supported.');\n    }\n\n    if (typeof fetch === 'undefined') {\n      console.warn('THREE.ImageBitmapLoader: fetch() not supported.');\n    }\n\n    _this.options = {\n      premultiplyAlpha: 'none'\n    };\n    return _this;\n  }\n\n  _createClass(ImageBitmapLoader, [{\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      this.options = options;\n      return this;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, onLoad, onProgress, onError) {\n      if (url === undefined) url = '';\n      if (this.path !== undefined) url = this.path + url;\n      url = this.manager.resolveURL(url);\n      var scope = this;\n      var cached = Cache.get(url);\n\n      if (cached !== undefined) {\n        scope.manager.itemStart(url);\n        setTimeout(function () {\n          if (onLoad) onLoad(cached);\n          scope.manager.itemEnd(url);\n        }, 0);\n        return cached;\n      }\n\n      var fetchOptions = {};\n      fetchOptions.credentials = this.crossOrigin === 'anonymous' ? 'same-origin' : 'include';\n      fetchOptions.headers = this.requestHeader;\n      fetch(url, fetchOptions).then(function (res) {\n        return res.blob();\n      }).then(function (blob) {\n        return createImageBitmap(blob, Object.assign(scope.options, {\n          colorSpaceConversion: 'none'\n        }));\n      }).then(function (imageBitmap) {\n        Cache.add(url, imageBitmap);\n        if (onLoad) onLoad(imageBitmap);\n        scope.manager.itemEnd(url);\n      }).catch(function (e) {\n        if (onError) onError(e);\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      });\n      scope.manager.itemStart(url);\n    }\n  }]);\n\n  return ImageBitmapLoader;\n}(Loader);\n\nImageBitmapLoader.prototype.isImageBitmapLoader = true;\nexport { ImageBitmapLoader };","map":null,"metadata":{},"sourceType":"module"}