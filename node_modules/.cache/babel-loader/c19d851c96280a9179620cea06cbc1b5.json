{"ast":null,"code":"import { LightShadow } from './LightShadow.js';\nimport * as MathUtils from '../math/MathUtils.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\n\nclass SpotLightShadow extends LightShadow {\n  constructor() {\n    super(new PerspectiveCamera(50, 1, 0.5, 500));\n    this.focus = 1;\n  }\n\n  updateMatrices(light) {\n    const camera = this.camera;\n    const fov = MathUtils.RAD2DEG * 2 * light.angle * this.focus;\n    const aspect = this.mapSize.width / this.mapSize.height;\n    const far = light.distance || camera.far;\n\n    if (fov !== camera.fov || aspect !== camera.aspect || far !== camera.far) {\n      camera.fov = fov;\n      camera.aspect = aspect;\n      camera.far = far;\n      camera.updateProjectionMatrix();\n    }\n\n    super.updateMatrices(light);\n  }\n\n  copy(source) {\n    super.copy(source);\n    this.focus = source.focus;\n    return this;\n  }\n\n}\n\nSpotLightShadow.prototype.isSpotLightShadow = true;\nexport { SpotLightShadow };","map":null,"metadata":{},"sourceType":"module"}