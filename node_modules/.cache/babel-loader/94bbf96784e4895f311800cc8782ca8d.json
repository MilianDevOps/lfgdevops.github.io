{"ast":null,"code":"import { Line } from '../objects/Line.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { FrontSide, BackSide } from '../constants.js';\n\nclass PlaneHelper extends Line {\n  constructor(plane) {\n    let size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    let hex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0xffff00;\n    const color = hex;\n    const positions = [1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0];\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));\n    geometry.computeBoundingSphere();\n    super(geometry, new LineBasicMaterial({\n      color: color,\n      toneMapped: false\n    }));\n    this.type = 'PlaneHelper';\n    this.plane = plane;\n    this.size = size;\n    const positions2 = [1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1];\n    const geometry2 = new BufferGeometry();\n    geometry2.setAttribute('position', new Float32BufferAttribute(positions2, 3));\n    geometry2.computeBoundingSphere();\n    this.add(new Mesh(geometry2, new MeshBasicMaterial({\n      color: color,\n      opacity: 0.2,\n      transparent: true,\n      depthWrite: false,\n      toneMapped: false\n    })));\n  }\n\n  updateMatrixWorld(force) {\n    let scale = -this.plane.constant;\n    if (Math.abs(scale) < 1e-8) scale = 1e-8; // sign does not matter\n\n    this.scale.set(0.5 * this.size, 0.5 * this.size, scale);\n    this.children[0].material.side = scale < 0 ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\n\n    this.lookAt(this.plane.normal);\n    super.updateMatrixWorld(force);\n  }\n\n}\n\nexport { PlaneHelper };","map":null,"metadata":{},"sourceType":"module"}