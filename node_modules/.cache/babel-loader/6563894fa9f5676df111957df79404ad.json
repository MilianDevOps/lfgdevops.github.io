{"ast":null,"code":"import _toConsumableArray from\"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _objectDestructuringEmpty from\"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _asyncToGenerator from\"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/robertrinearson/Documents/blockchain/lfg/cyberdeck-twitter/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect}from\"react\";import{ChakraProvider}from\"@chakra-ui/react\";import Web3 from\"web3\";import{BrowserRouter as Router,Routes,Route,Link,useNavigate,useLocation}from\"react-router-dom\";import\"./App.css\";import{Web3Context}from\"./contexts/Web3Context\";import CyberDeck from\"./abis/CyberDeck.json\";import FakeNFT from\"./abis/FakeNFT.json\";import ERC721 from\"./abis/ERC721.json\";import CONFIG from\"./config.json\";import Home from\"./Pages/Home\";import BootupScreen from\"./components/BootupScreen\";import{WidthContainer}from\"./components/WidthContainer\";import ConnectWalletScreen from\"./components/ConnectWalletScreen\";import useKeyPress from\"./components/useKeyPress\";import Whitepaper from\"./Pages/Whitepaper\";import TerminalScreen from\"./components/TerminalScreen\";import RoomSceneLoader from\"./components/RoomScene/RoomSceneLoader\";import App3D from\"./App3D\";import Mint from\"./Pages/Mint\";import errorParser from\"./utils/errorParser\";import{BrowserView,MobileView,isBrowser,isMobile}from\"react-device-detect\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var allNFTS=[\"0x614e92021a82240bc73AB61e899FA75d91087964\",\"0x55B2431d6Aa7AD9A726f652305f21314d636A9c6\",\"0xa74C87459c8B03aB5234B4CcdD743e53DAd34f3C\"];function App(){var navigate=useNavigate();var location=useLocation();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),web3=_useState2[0],setWeb3=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),cyberDeck=_useState4[0],setCyberDeck=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),fakeNft=_useState6[0],setFakeNft=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),supplyAvailable=_useState8[0],setSupplyAvailable=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),balanceOf=_useState10[0],setBalanceOf=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),supply=_useState12[0],setTotalSupply=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),price=_useState14[0],setPrice=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),account=_useState16[0],setAccount=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),currentNetwork=_useState18[0],setCurrentNetwork=_useState18[1];var clearKeyPress=useKeyPress(\"c\");var _useState19=useState(\"https://etherscan.io/\"),_useState20=_slicedToArray(_useState19,2),blockchainExplorerURL=_useState20[0],setBlockchainExplorerURL=_useState20[1];var _useState21=useState(\"https://opensea.io/collection/hogwash-polygon\"),_useState22=_slicedToArray(_useState21,2),openseaURL=_useState22[0],setOpenseaURL=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),isMinting=_useState24[0],setIsMinting=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),isError=_useState26[0],setIsError=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),message=_useState28[0],setMessage=_useState28[1];var _useState29=useState(new Date().getTime()),_useState30=_slicedToArray(_useState29,2),currentTime=_useState30[0],setCurrentTime=_useState30[1];var _useState31=useState(0),_useState32=_slicedToArray(_useState31,2),revealTime=_useState32[0],setRevealTime=_useState32[1];var _useState33=useState(null),_useState34=_slicedToArray(_useState33,2),ownedTokens=_useState34[0],setOwnedTokens=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),allowedNfts=_useState36[0],setAllowedNfts=_useState36[1];var _useState37=useState([]),_useState38=_slicedToArray(_useState37,2),ownedAllowedNfts=_useState38[0],setOwnedAllowedNfts=_useState38[1];// ANIMATION CONSTS\nvar _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),isLoadingInitialData=_useState40[0],setIsLoadingInitialData=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),isLoadingCyberdeck=_useState42[0],setIsLoadingCyberdeck=_useState42[1];var _useState43=useState(false),_useState44=_slicedToArray(_useState43,2),isLoadingUserTokens=_useState44[0],setIsLoadingUserTokens=_useState44[1];var _useState45=useState(false),_useState46=_slicedToArray(_useState45,2),clearedBootup=_useState46[0],setClearedBootup=_useState46[1];var mintNFTHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref){var tokenAddress,tokenId,_price;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:tokenAddress=_ref.tokenAddress,tokenId=_ref.tokenId;if(!cyberDeck){_context2.next=9;break;}setIsMinting(true);setIsError(false);_context2.next=6;return cyberDeck.methods.price().call();case 6:_price=_context2.sent;_context2.next=9;return cyberDeck.methods.buy(tokenAddress,tokenId).send({from:account,value:parseInt(_price.toString()).toString()}).on(\"receipt\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return loadBlockchainData(true);case 3:_context.next=7;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);case 7:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}))).on(\"error\",function(error){window.alert(errorParser.parseError({error:error.message.toString(),errorSet:errorParser.cyberDeckErrors}));setIsError(true);});case 9:setIsMinting(false);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function mintNFTHandler(_x){return _ref2.apply(this,arguments);};}();function getParentNft(_x2){return _getParentNft.apply(this,arguments);}function _getParentNft(){_getParentNft=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref4){var _account,_index,_cyberDeck,tokenId,parentNft,nftContract,ownerOfParent,resp,_resp;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_account=_ref4._account,_index=_ref4._index,_cyberDeck=_ref4._cyberDeck;_context6.prev=1;_context6.next=4;return _cyberDeck.methods.tokenOfOwnerByIndex(_account,_index).call();case 4:tokenId=_context6.sent;_context6.next=7;return _cyberDeck.methods.parentNfts(tokenId).call();case 7:parentNft=_context6.sent;nftContract=new web3.eth.Contract(ERC721.abi,parentNft.tokenAddress);_context6.next=11;return nftContract.methods.ownerOf(parentNft.tokenId).call();case 11:ownerOfParent=_context6.sent;resp={cyberDeckOwner:_account,index:_index,tokenId:tokenId,parentTokenAddress:parentNft.tokenAddress,parentTokenId:parentNft.tokenId,parentTokenOwner:ownerOfParent};return _context6.abrupt(\"return\",{tokenData:resp});case 16:_context6.prev=16;_context6.t0=_context6[\"catch\"](1);_resp={cyberDeckOwner:_account,index:_index,tokenId:-1,error:_context6.t0};return _context6.abrupt(\"return\",_resp);case 20:case\"end\":return _context6.stop();}}},_callee6,null,[[1,16]]);}));return _getParentNft.apply(this,arguments);}function getNftAndMetadata(_x3){return _getNftAndMetadata.apply(this,arguments);}function _getNftAndMetadata(){_getNftAndMetadata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_ref5){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_objectDestructuringEmpty(_ref5);case 1:case\"end\":return _context7.stop();}}},_callee7);}));return _getNftAndMetadata.apply(this,arguments);}function getAllowedNFT(_x4){return _getAllowedNFT.apply(this,arguments);}function _getAllowedNFT(){_getAllowedNFT=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(_ref6){var nftAddress,_account,nftContract,_bo,otp,_yield$Promise$all,_yield$Promise$all2,name,symbol,i,tIds,twd,_iterator,_step,id;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:nftAddress=_ref6.nftAddress,_account=_ref6._account;_context8.prev=1;nftContract=new web3.eth.Contract(FakeNFT.abi,nftAddress);_context8.next=5;return nftContract.methods.balanceOf(_account).call();case 5:_bo=_context8.sent;otp=[];_context8.next=9;return Promise.all([nftContract.methods.name().call(),nftContract.methods.symbol().call()]);case 9:_yield$Promise$all=_context8.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);name=_yield$Promise$all2[0];symbol=_yield$Promise$all2[1];if(!(_bo<1)){_context8.next=15;break;}return _context8.abrupt(\"return\",[]);case 15:for(i=0;i<_bo;i++){otp.push(nftContract.methods.tokenOfOwnerByIndex(_account,i).call());}_context8.next=18;return Promise.all(otp);case 18:tIds=_context8.sent;twd=[];_iterator=_createForOfIteratorHelper(tIds);try{for(_iterator.s();!(_step=_iterator.n()).done;){id=_step.value;twd.push({name:name,symbol:symbol,address:nftAddress,tokenId:id});}}catch(err){_iterator.e(err);}finally{_iterator.f();}return _context8.abrupt(\"return\",twd);case 25:_context8.prev=25;_context8.t0=_context8[\"catch\"](1);return _context8.abrupt(\"return\",[]);case 28:case\"end\":return _context8.stop();}}},_callee8,null,[[1,25]]);}));return _getAllowedNFT.apply(this,arguments);}function getAllAllowedNFTs(_x5){return _getAllAllowedNFTs.apply(this,arguments);}function _getAllAllowedNFTs(){_getAllAllowedNFTs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_ref7){var _account,ap,_iterator2,_step2,a,al,allEm,_iterator3,_step3,l;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_account=_ref7._account;ap=[];_iterator2=_createForOfIteratorHelper(allNFTS);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){a=_step2.value;ap.push(getAllowedNFT({nftAddress:a,_account:_account}));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_context9.next=6;return Promise.all(ap);case 6:al=_context9.sent;allEm=[];_iterator3=_createForOfIteratorHelper(al);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){l=_step3.value;allEm=[].concat(_toConsumableArray(allEm),_toConsumableArray(l));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}setOwnedAllowedNfts(allEm);case 11:case\"end\":return _context9.stop();}}},_callee9);}));return _getAllAllowedNFTs.apply(this,arguments);}function getOwnedTokens(_x6){return _getOwnedTokens.apply(this,arguments);}function _getOwnedTokens(){_getOwnedTokens=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_ref8){var _account,_cyberDeck,_balanceOf,tokenPromises,i,ot;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_account=_ref8._account,_cyberDeck=_ref8._cyberDeck;_context10.next=3;return _cyberDeck.methods.balanceOf(_account).call();case 3:_balanceOf=_context10.sent;tokenPromises=[];for(i=0;i<_balanceOf;i++){tokenPromises.push(getParentNft({_account:_account,_index:i,_cyberDeck:_cyberDeck}));}_context10.next=8;return Promise.all(tokenPromises);case 8:ot=_context10.sent;ot=ot.filter(function(_ref12){var tokenData=_ref12.tokenData;return tokenData&&!tokenData.error&&tokenData.parentTokenOwner&&tokenData.parentTokenOwner.toString()===_account.toString();});setOwnedTokens(ot);case 11:case\"end\":return _context10.stop();}}},_callee10);}));return _getOwnedTokens.apply(this,arguments);}useEffect(function(){if(clearKeyPress&&!isLoadingInitialData){setClearedBootup(true);}},[clearKeyPress]);function clearMobileBootup(){if(isMobile&&!isLoadingInitialData){setClearedBootup(true);}}var loadBlockchainData=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_clearedBootup){var networkId,_cyberDeck2,_fakeNft,_price2,maxSupply,totalSupply;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!web3){_context3.next=42;break;}setClearedBootup(_clearedBootup);setIsLoadingInitialData(true);_context3.next=5;return web3.eth.net.getId();case 5:networkId=_context3.sent;setCurrentNetwork(networkId);_context3.prev=7;if(!(!CyberDeck.networks[networkId]||!CyberDeck.networks[networkId].address)){_context3.next=11;break;}setIsLoadingInitialData(false);// window.alert(\"Please Connect to the Ethereum Mainnet\");\nreturn _context3.abrupt(\"return\");case 11:_cyberDeck2=new web3.eth.Contract(CyberDeck.abi,CyberDeck.networks[networkId].address);_fakeNft=new web3.eth.Contract(FakeNFT.abi,FakeNFT.networks[networkId].address);setIsLoadingCyberdeck(true);setCyberDeck(_cyberDeck2);setFakeNft(_fakeNft);_context3.next=18;return _cyberDeck2.methods.price().call();case 18:_price2=_context3.sent;_context3.next=21;return _cyberDeck2.methods.maxSupply().call();case 21:maxSupply=_context3.sent;_context3.next=24;return _cyberDeck2.methods.totalSupply().call();case 24:totalSupply=_context3.sent;setPrice(_price2);setTotalSupply(totalSupply);setSupplyAvailable(maxSupply-totalSupply);if(networkId!==5777){setBlockchainExplorerURL(CONFIG.NETWORKS[networkId].blockchainExplorerURL);setOpenseaURL(CONFIG.NETWORKS[networkId].openseaURL);}if(!account){_context3.next=35;break;}setIsLoadingUserTokens(true);_context3.next=33;return getAllAllowedNFTs({_account:account});case 33:_context3.next=35;return getOwnedTokens({_account:account,_cyberDeck:_cyberDeck2});case 35:setIsLoadingInitialData(false);// setIsLoadingCyberdeck(false);\n// setIsLoadingUserTokens(false);\n_context3.next=42;break;case 38:_context3.prev=38;_context3.t0=_context3[\"catch\"](7);setIsError(true);setMessage(\"Contract not deployed to current network, please change network in MetaMask\");case 42:case\"end\":return _context3.stop();}}},_callee3,null,[[7,38]]);}));return function loadBlockchainData(_x7){return _ref9.apply(this,arguments);};}();var loadWeb3=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _web,accounts;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(typeof window.ethereum!==\"undefined\"&&!account)){_context4.next=9;break;}_web=new Web3(window.ethereum,{transactionConfirmationBlocks:1});setWeb3(_web);_context4.next=5;return _web.eth.getAccounts();case 5:accounts=_context4.sent;if(accounts.length>0){setAccount(accounts[0]);}else{setMessage(\"Please connect with MetaMask\");}window.ethereum.on(\"accountsChanged\",function(accounts){setAccount(accounts[0]);setMessage(null);});window.ethereum.on(\"chainChanged\",function(chainId){// Handle the new chain.\n// Correctly handling chain changes can be complicated.\n// We recommend reloading the page unless you have good reason not to.\nwindow.location.reload();});case 9:case\"end\":return _context4.stop();}}},_callee4);}));return function loadWeb3(){return _ref10.apply(this,arguments);};}();var web3Handler=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var accounts;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!web3){_context5.next=5;break;}_context5.next=3;return window.ethereum.request({method:\"eth_requestAccounts\"});case 3:accounts=_context5.sent;setAccount(accounts[0]);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function web3Handler(){return _ref11.apply(this,arguments);};}();useEffect(function(){loadWeb3();loadBlockchainData(false);},[account]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Web3Context.Provider,{value:{account:account,setAccount:setAccount,cyberDeck:cyberDeck,web3:web3,web3Handler:web3Handler,supply:supply,mintNFTHandler:mintNFTHandler,ownedAllowedNfts:ownedAllowedNfts,ownedTokens:ownedTokens},children:false?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(TerminalScreen,{children:/*#__PURE__*/_jsx(ConnectWalletScreen,{})})}):/*#__PURE__*/_jsx(_Fragment,{children:!clearedBootup&&location.pathname.length>1?/*#__PURE__*/_jsx(TerminalScreen,{onClick:clearMobileBootup,children:/*#__PURE__*/_jsx(BootupScreen,{isLoadingCyberdeck:isLoadingCyberdeck,isLoadingUserTokens:isLoadingUserTokens,isLoadingInitialData:isLoadingInitialData,account:account})}):/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/whitepaper\",element:/*#__PURE__*/_jsx(TerminalScreen,{children:/*#__PURE__*/_jsx(Whitepaper,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(TerminalScreen,{children:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/mint\",element:/*#__PURE__*/_jsx(TerminalScreen,{children:/*#__PURE__*/_jsx(Mint,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:isBrowser?/*#__PURE__*/_jsx(App3D,{}):/*#__PURE__*/_jsx(TerminalScreen,{children:/*#__PURE__*/_jsx(Whitepaper,{})})})]})})})})});}function MyApp(){return/*#__PURE__*/_jsx(\"div\",{id:\"app\",className:\"app2d\",children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(App,{})})});}export default MyApp;","map":null,"metadata":{},"sourceType":"module"}