{"ast":null,"code":"import { Vector3 } from '../math/Vector3.js';\nimport { Quaternion } from '../math/Quaternion.js';\nimport { Audio } from './Audio.js';\n\nconst _position = /*@__PURE__*/new Vector3();\n\nconst _quaternion = /*@__PURE__*/new Quaternion();\n\nconst _scale = /*@__PURE__*/new Vector3();\n\nconst _orientation = /*@__PURE__*/new Vector3();\n\nclass PositionalAudio extends Audio {\n  constructor(listener) {\n    super(listener);\n    this.panner = this.context.createPanner();\n    this.panner.panningModel = 'HRTF';\n    this.panner.connect(this.gain);\n  }\n\n  getOutput() {\n    return this.panner;\n  }\n\n  getRefDistance() {\n    return this.panner.refDistance;\n  }\n\n  setRefDistance(value) {\n    this.panner.refDistance = value;\n    return this;\n  }\n\n  getRolloffFactor() {\n    return this.panner.rolloffFactor;\n  }\n\n  setRolloffFactor(value) {\n    this.panner.rolloffFactor = value;\n    return this;\n  }\n\n  getDistanceModel() {\n    return this.panner.distanceModel;\n  }\n\n  setDistanceModel(value) {\n    this.panner.distanceModel = value;\n    return this;\n  }\n\n  getMaxDistance() {\n    return this.panner.maxDistance;\n  }\n\n  setMaxDistance(value) {\n    this.panner.maxDistance = value;\n    return this;\n  }\n\n  setDirectionalCone(coneInnerAngle, coneOuterAngle, coneOuterGain) {\n    this.panner.coneInnerAngle = coneInnerAngle;\n    this.panner.coneOuterAngle = coneOuterAngle;\n    this.panner.coneOuterGain = coneOuterGain;\n    return this;\n  }\n\n  updateMatrixWorld(force) {\n    super.updateMatrixWorld(force);\n    if (this.hasPlaybackControl === true && this.isPlaying === false) return;\n    this.matrixWorld.decompose(_position, _quaternion, _scale);\n\n    _orientation.set(0, 0, 1).applyQuaternion(_quaternion);\n\n    const panner = this.panner;\n\n    if (panner.positionX) {\n      // code path for Chrome and Firefox (see #14393)\n      const endTime = this.context.currentTime + this.listener.timeDelta;\n      panner.positionX.linearRampToValueAtTime(_position.x, endTime);\n      panner.positionY.linearRampToValueAtTime(_position.y, endTime);\n      panner.positionZ.linearRampToValueAtTime(_position.z, endTime);\n      panner.orientationX.linearRampToValueAtTime(_orientation.x, endTime);\n      panner.orientationY.linearRampToValueAtTime(_orientation.y, endTime);\n      panner.orientationZ.linearRampToValueAtTime(_orientation.z, endTime);\n    } else {\n      panner.setPosition(_position.x, _position.y, _position.z);\n      panner.setOrientation(_orientation.x, _orientation.y, _orientation.z);\n    }\n  }\n\n}\n\nexport { PositionalAudio };","map":null,"metadata":{},"sourceType":"module"}